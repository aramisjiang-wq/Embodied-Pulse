# Embodied Pulse 技术规格文档（SPEC）

**产品名称**：Embodied Pulse（具身智能脉搏）  
**文档类型**：技术规格说明书  
**版本**：v6.1  
**更新日期**：2026-02-22  
**状态**：已审核  

---

## 目录

1. [系统架构图谱](#1-系统架构图谱)
2. [技术栈规格](#2-技术栈规格)
3. [数据库设计规格](#3-数据库设计规格)
4. [API 接口规格](#4-api-接口规格)
5. [前端组件规格](#5-前端组件规格)
6. [第三方服务规格](#6-第三方服务规格)
7. [部署架构规格](#7-部署架构规格)
8. [安全规格](#8-安全规格)

---

## 1. 系统架构图谱

### 1.1 整体架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              客户端层 (Client Layer)                          │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐         │
│  │   Web Browser   │    │   Mobile PWA    │    │   Admin Panel   │         │
│  │   (Next.js 14)  │    │   (Responsive)  │    │   (Next.js 14)  │         │
│  └────────┬────────┘    └────────┬────────┘    └────────┬────────┘         │
│           │                      │                      │                   │
│           └──────────────────────┼──────────────────────┘                   │
│                                  ▼                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                              网关层 (Gateway Layer)                          │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    NGINX 反向代理 + 负载均衡                          │   │
│  │                    - SSL 终端 / 静态资源 / 请求转发                    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                  │                                          │
│                                  ▼                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                              服务层 (Service Layer)                          │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    Backend API (Express + TypeScript)                │   │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐  │   │
│  │  │ 认证服务  │ │ 内容服务  │ │ 社区服务  │ │ 同步服务  │ │ 管理服务  │  │   │
│  │  │  Auth    │ │ Content  │ │Community │ │  Sync    │ │  Admin   │  │   │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                  │                                          │
│                                  ▼                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                              数据层 (Data Layer)                             │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐         │
│  │   SQLite/PG     │    │     Redis       │    │  File Storage   │         │
│  │   (主数据库)     │    │  (缓存/队列)     │    │   (文件存储)     │         │
│  │   Prisma ORM    │    │   Bull Queue    │    │                 │         │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘         │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                           外部服务层 (External Services)                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐              │
│  │ ArXiv   │ │ GitHub  │ │Bilibili │ │HuggingFace│ │ 36kr   │              │
│  │  API    │ │  API    │ │  API    │ │   API    │ │  API   │              │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.2 前端架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              前端架构                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         页面层 (Pages)                               │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐          │   │
│  │  │ 首页      │ │ 内容页    │ │ 社区页    │ │ 管理页    │          │   │
│  │  │ /         │ │ /papers   │ │/community │ │ /admin    │          │   │
│  │  │ /videos   │ │ /repos    │ │ /posts    │ │ /users    │          │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         组件层 (Components)                          │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐          │   │
│  │  │ Layout    │ │ Feed      │ │ Content   │ │ Common    │          │   │
│  │  │ Header    │ │ FeedCard  │ │ PaperCard │ │ Button    │          │   │
│  │  │ Sidebar   │ │ FeedList  │ │ VideoCard │ │ Modal     │          │   │
│  │  │ Footer    │ │ FilterBar │ │ RepoCard  │ │ Table     │          │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         状态层 (State)                               │   │
│  │  ┌───────────────────────┐ ┌───────────────────────┐               │   │
│  │  │  React Query          │ │  Zustand              │               │   │
│  │  │  - 服务端状态缓存      │ │  - 客户端状态管理      │               │   │
│  │  │  - 数据获取和同步      │ │  - 用户认证状态        │               │   │
│  │  │  - 缓存失效策略        │ │  - UI状态管理          │               │   │
│  │  └───────────────────────┘ └───────────────────────┘               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         API层 (API Client)                           │   │
│  │  ┌───────────────────────────────────────────────────────────────┐ │   │
│  │  │  Axios Instance                                                │ │   │
│  │  │  - 请求拦截器 (添加Token)                                       │ │   │
│  │  │  - 响应拦截器 (错误处理)                                        │ │   │
│  │  │  - 自动刷新Token                                                │ │   │
│  │  └───────────────────────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.3 后端架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              后端架构                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         入口层 (Entry)                               │   │
│  │  ┌───────────────────────────────────────────────────────────────┐ │   │
│  │  │  Express App                                                   │ │   │
│  │  │  - CORS配置                                                    │ │   │
│  │  │  - Body Parser                                                 │ │   │
│  │  │  - 日志中间件                                                  │ │   │
│  │  │  - 错误处理中间件                                              │ │   │
│  │  └───────────────────────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         中间件层 (Middleware)                        │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐          │   │
│  │  │ Auth      │ │ Validate  │ │ RateLimit │ │ Admin     │          │   │
│  │  │ JWT验证   │ │ 输入验证  │ │ 请求限流  │ │ 管理员权限 │          │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         路由层 (Routes)                              │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐          │   │
│  │  │ /auth     │ │ /papers   │ │ /videos   │ │ /admin    │          │   │
│  │  │ /users    │ │ /repos    │ │ /posts    │ │ /sync     │          │   │
│  │  │ /favorites│ │ /jobs     │ │ /comments │ │ /stats    │          │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         控制层 (Controllers)                         │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐          │   │
│  │  │ AuthCtrl  │ │ PaperCtrl │ │ VideoCtrl │ │ AdminCtrl │          │   │
│  │  │ UserCtrl  │ │ RepoCtrl  │ │ PostCtrl  │ │ SyncCtrl  │          │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         服务层 (Services)                            │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐          │   │
│  │  │ AuthService│ │PaperService│ │VideoService│ │AdminService│         │   │
│  │  │ UserService│ │ RepoService│ │ PostService│ │ SyncService│         │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                   │                                         │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         数据层 (Repository)                          │   │
│  │  ┌───────────────────────────────────────────────────────────────┐ │   │
│  │  │  Prisma ORM                                                    │ │   │
│  │  │  - User / Paper / Video / Repo / Post / Comment               │ │   │
│  │  │  - Favorite / Subscription / Notification                      │ │   │
│  │  └───────────────────────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 技术栈规格

### 2.1 前端技术栈

| 类别 | 技术 | 版本 | 用途 |
|------|------|------|------|
| 框架 | Next.js | 14.x | React全栈框架 |
| UI库 | React | 18.x | 前端UI库 |
| 语言 | TypeScript | 5.x | 类型安全 |
| 样式 | Tailwind CSS | 3.x | 原子化CSS |
| 组件库 | Ant Design | 5.x | UI组件库 |
| 图标 | Lucide React | - | 图标库 |
| 状态管理 | Zustand | 4.x | 客户端状态 |
| 数据获取 | React Query | 5.x | 服务端状态 |
| HTTP客户端 | Axios | 1.x | API请求 |
| 表单验证 | Zod | 3.x | Schema验证 |
| 日期处理 | date-fns | 3.x | 日期格式化 |
| Markdown | react-markdown | 9.x | Markdown渲染 |

### 2.2 后端技术栈

| 类别 | 技术 | 版本 | 用途 |
|------|------|------|------|
| 运行时 | Node.js | 18.x | JavaScript运行时 |
| 框架 | Express | 4.x | Web框架 |
| 语言 | TypeScript | 5.x | 类型安全 |
| ORM | Prisma | 5.x | 数据库ORM |
| 数据库 | SQLite | 3.x | 开发数据库 |
| 数据库 | PostgreSQL | 15.x | 生产数据库 |
| 缓存 | Redis | 7.x | 缓存/队列 |
| 队列 | Bull | 4.x | 任务队列 |
| 认证 | JWT | - | 身份验证 |
| 密码加密 | bcrypt | 5.x | 密码哈希 |
| 输入验证 | Zod | 3.x | 请求验证 |
| 日志 | Winston | 3.x | 日志记录 |

### 2.3 开发工具

| 类别 | 技术 | 用途 |
|------|------|------|
| 包管理器 | pnpm | 依赖管理 |
| 代码规范 | ESLint | 代码检查 |
| 代码格式化 | Prettier | 代码格式化 |
| 类型检查 | TypeScript | 静态类型检查 |
| 版本控制 | Git | 代码版本管理 |

---

## 3. 数据库设计规格

### 3.1 核心数据模型

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              数据模型关系图                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────┐       ┌─────────┐       ┌─────────┐       ┌─────────┐        │
│  │  User   │──1:N──│Favorite │       │  Paper  │       │  Video  │        │
│  │         │       │         │       │         │       │         │        │
│  │ id      │       │ userId  │       │ id      │       │ id      │        │
│  │ email   │       │ type    │       │ title   │       │ title   │        │
│  │ nickname│       │ contentId│      │ abstract│       │ bvid    │        │
│  │ role    │       └─────────┘       │ arxivId │       │ author  │        │
│  └─────────┘                         └─────────┘       └─────────┘        │
│       │                                                                    │
│       │1:N                                                                 │
│       ▼                                                                    │
│  ┌─────────┐       ┌─────────┐       ┌─────────┐       ┌─────────┐        │
│  │Subscription│    │  Post   │──1:N──│ Comment │       │  Repo   │        │
│  │         │       │         │       │         │       │         │        │
│  │ userId  │       │ authorId│       │ postId  │       │ id      │        │
│  │ keyword │       │ title   │       │ content │       │ name    │        │
│  │ types   │       │ content │       │ authorId│       │ stars   │        │
│  └─────────┘       └─────────┘       └─────────┘       └─────────┘        │
│                                                                             │
│  ┌─────────┐       ┌─────────┐       ┌─────────┐       ┌─────────┐        │
│  │HuggingFace│      │  Job    │       │Banner   │       │Announcement│     │
│  │ Model   │       │         │       │         │       │         │        │
│  │ id      │       │ id      │       │ id      │       │ id      │        │
│  │ modelId │       │ title   │       │ title   │       │ title   │        │
│  │ author  │       │ company │       │ imageUrl│       │ content │        │
│  └─────────┘       └─────────┘       └─────────┘       └─────────┘        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 主要数据表

| 表名 | 说明 | 主要字段 |
|------|------|----------|
| User | 用户表 | id, email, nickname, password, role, points |
| Paper | 论文表 | id, title, abstract, arxivId, authors, publishedAt |
| Video | 视频表 | id, title, bvid, author, coverUrl, duration |
| Repo | 仓库表 | id, name, fullName, description, stars, forks |
| HuggingFaceModel | 模型表 | id, modelId, author, downloads, likes |
| Job | 职位表 | id, title, company, location, salary, source |
| Post | 帖子表 | id, title, content, authorId, tags |
| Comment | 评论表 | id, content, postId, authorId, parentId |
| Favorite | 收藏表 | id, userId, contentType, contentId |
| Subscription | 订阅表 | id, userId, keyword, types |
| Notification | 通知表 | id, userId, type, content, isRead |
| Banner | Banner表 | id, title, imageUrl, linkUrl, sortOrder |
| Announcement | 公告表 | id, title, content, isActive |
| CustomPage | 自定义页面表 | id, title, slug, content, isActive |
| HomeModule | 首页模块表 | id, title, type, config, sortOrder |

---

## 4. API 接口规格

### 4.1 统一响应格式

```typescript
interface ApiResponse<T> {
  code: number;      // 状态码：0=成功
  message: string;   // 状态消息
  data: T;           // 响应数据
  timestamp: number; // 时间戳
}
```

### 4.2 分页参数

```typescript
interface PaginationParams {
  page: number;      // 页码，从1开始
  size: number;      // 每页数量，默认20
  sort?: string;     // 排序字段
  order?: 'asc' | 'desc';  // 排序方向
}
```

### 4.3 认证方式

所有需要认证的接口需在请求头携带Token：

```
Authorization: Bearer <access_token>
```

### 4.4 JWT Token 规格

| Token 类型 | 有效期 | 用途 |
|------------|--------|------|
| Access Token | 7 天 | API 调用 |
| Refresh Token | 30 天 | 刷新 Token |

### 4.5 密钥配置

```env
JWT_ACCESS_SECRET=your_access_secret_key
JWT_REFRESH_SECRET=your_refresh_secret_key
```

### 4.6 API 路由模块

后端共有 **57个路由模块**，主要包括：

| 模块 | 路由文件 | 说明 |
|------|----------|------|
| 认证 | auth.routes.ts | 登录、注册、Token刷新 |
| 用户 | user.routes.ts | 用户资料管理 |
| 内容 | paper/video/repo/huggingface/job.routes.ts | 内容CRUD |
| 社区 | community/post/comment.routes.ts | 社区功能 |
| 订阅 | subscription/content-subscription.routes.ts | 订阅功能 |
| 管理 | admin.routes.ts | 管理端功能 |
| 同步 | sync/sync-queue/scheduler.routes.ts | 数据同步 |
| 其他 | banner/announcement/home-module.routes.ts | 配置管理 |

详细API接口请参考 [API接口文档](./API接口文档.md)。

---

## 5. 前端组件规格

### 5.1 用户端页面路由规格

**公开页面（无需登录）**：

| 路径 | 页面 | 说明 |
|------|------|------|
| `/` | 首页 | 信息流展示、推荐模块 |
| `/papers` | 论文列表 | 论文卡片列表 |
| `/papers/[id]` | 论文详情 | 论文详情页 |
| `/videos` | 视频列表 | 视频卡片列表 |
| `/videos/[id]` | 视频详情 | 视频播放页 |
| `/repos` | 仓库列表 | GitHub仓库列表 |
| `/repos/[id]` | 仓库详情 | 仓库详情页 |
| `/huggingface` | 模型列表 | HuggingFace模型列表 |
| `/huggingface/[id]` | 模型详情 | 模型详情页 |
| `/jobs` | 职位列表 | 招聘职位列表 |
| `/jobs/[id]` | 职位详情 | 职位详情页 |
| `/community` | 社区首页 | 帖子列表 |
| `/community/[id]` | 帖子详情 | 帖子详情页 |
| `/search` | 搜索结果 | 全局搜索 |
| `/ranking` | 排行榜 | 热门内容排行 |
| `/pages` | 页面列表 | 自定义页面列表 |
| `/pages/[slug]` | 自定义页面 | 管理员创建的页面 |
| `/user/[id]` | 用户主页 | 查看其他用户资料 |

**认证页面（需要登录）**：

| 路径 | 页面 | 说明 |
|------|------|------|
| `/login` | 登录 | 邮箱密码登录 |
| `/register` | 注册 | 邮箱验证码注册 |
| `/forgot-password` | 忘记密码 | 密码找回 |
| `/reset-password` | 重置密码 | 密码重置 |

**用户功能页面（需要登录）**：

| 路径 | 页面 | 说明 |
|------|------|------|
| `/profile` | 个人中心 | 用户资料管理 |
| `/settings` | 设置 | 用户设置 |
| `/favorites` | 收藏 | 收藏列表 |
| `/subscriptions` | 订阅列表 | 订阅管理 |
| `/subscriptions-new` | 新建订阅 | 创建订阅 |
| `/subscriptions/[id]` | 订阅详情 | 订阅详情页 |
| `/my-community` | 我的社区 | 我的帖子管理 |

### 5.2 管理端页面路由规格

| 路径 | 页面 | 说明 |
|------|------|------|
| `/admin` | 管理首页 | 数据概览 |
| `/admin/login` | 管理员登录 | 管理员登录页 |
| `/admin/users` | 用户管理 | 用户列表管理 |
| `/admin/admins` | 管理员管理 | 管理员列表 |
| `/admin/content` | 内容管理 | 内容管理首页 |
| `/admin/content/papers` | 论文管理 | 论文内容管理 |
| `/admin/content/videos` | 视频管理 | 视频内容管理 |
| `/admin/content/repos` | 仓库管理 | 仓库内容管理 |
| `/admin/content/jobs` | 职位管理 | 职位内容管理 |
| `/admin/content/huggingface` | 模型管理 | HF模型管理 |
| `/admin/community` | 社区管理 | 社区内容管理 |
| `/admin/community-config` | 社区配置 | 社区功能配置 |
| `/admin/pages` | 页面管理 | 自定义页面管理 |
| `/admin/banners` | Banner管理 | 首页Banner管理 |
| `/admin/announcements` | 公告管理 | 系统公告管理 |
| `/admin/home-modules` | 首页模块 | 首页模块配置 |
| `/admin/sync` | 数据同步 | 同步任务管理 |
| `/admin/sync-queue` | 同步队列 | 队列任务管理 |
| `/admin/scheduler` | 定时任务 | 定时任务配置 |
| `/admin/data-sources` | 数据源 | 数据源配置 |
| `/admin/bilibili-uploaders` | B站UP主 | UP主订阅管理 |
| `/admin/bilibili-search-keywords` | B站关键词 | B站搜索关键词 |
| `/admin/paper-search-keywords` | 论文关键词 | 论文搜索关键词 |
| `/admin/cookies` | Cookie管理 | B站Cookie管理 |
| `/admin/subscriptions` | 订阅管理 | 用户订阅查看 |
| `/admin/stats` | 统计分析 | 数据统计 |

### 5.3 状态管理规格

#### 5.3.1 React Query 配置

```typescript
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000,
      gcTime: 30 * 60 * 1000,
      retry: 1,
      refetchOnWindowFocus: false,
    },
  },
});
```

#### 5.3.2 Zustand Store 结构

```typescript
interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
  isAdmin: boolean;
  hydrated: boolean;
  
  setUser: (user: User | null) => void;
  setToken: (token: string | null, isAdmin?: boolean) => void;
  logout: () => void;
  initialize: () => void;
}
```

### 5.4 API 客户端规格

```typescript
const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL,
  timeout: 30000,
  headers: { 'Content-Type': 'application/json' },
});

api.interceptors.request.use((config) => {
  const token = getToken();
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

api.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.response?.status === 401) {
      if (window.location.pathname.startsWith('/admin')) {
        window.location.href = '/admin/login';
      }
    }
    return Promise.reject(error);
  }
);
```

---

## 6. 第三方服务规格

### 6.1 外部 API 集成

| 服务 | API | 用途 | 频率限制 |
|------|-----|------|----------|
| GitHub | REST API | 仓库同步 | 5000次/小时 |
| ArXiv | API | 论文同步 | 无限制 |
| Bilibili | API | 视频同步 | 需登录态 |
| HuggingFace | API | 模型同步 | 无限制 |

### 6.2 同步任务配置

| 任务 | 频率 | 说明 |
|------|------|------|
| ArXiv 论文同步 | 每小时 | 增量同步 |
| GitHub 仓库同步 | 每15分钟 | 热门仓库 |
| Bilibili 视频同步 | 每小时 | UP主视频 |
| HuggingFace 模型同步 | 每6小时 | 热门模型 |

---

## 7. 部署架构规格

### 7.1 环境配置

| 环境 | 域名 | 数据库 | 说明 |
|------|------|------|------|
| 开发 | localhost | SQLite | 本地开发 |
| 测试 | test.example.com | PostgreSQL | 测试环境 |
| 生产 | www.example.com | PostgreSQL | 生产环境 |

### 7.2 服务配置

| 服务 | 端口 | 说明 |
|------|------|------|
| Frontend | 3000 | Next.js |
| Backend | 3001 | Express |
| Redis | 6379 | 缓存服务 |
| PostgreSQL | 5432 | 数据库 |

### 7.3 环境变量

```env
DATABASE_URL=postgresql://user:pass@host:5432/db
REDIS_URL=redis://localhost:6379
JWT_ACCESS_SECRET=your_secret
JWT_REFRESH_SECRET=your_refresh_secret
GITHUB_TOKEN=your_github_token
```

---

## 8. 安全规格

### 8.1 认证安全

| 项目 | 规格 | 状态 |
|------|------|------|
| 密码加密 | bcrypt (10 rounds) | ✅ |
| JWT双Token | Access + Refresh | ✅ |
| Token刷新 | 自动刷新机制 | ✅ |
| 会话管理 | Redis存储 | ✅ |

### 8.2 接口安全

| 项目 | 规格 | 状态 |
|------|------|------|
| 输入验证 | Zod Schema | ✅ |
| XSS防护 | DOMPurify | ✅ |
| SQL注入防护 | Prisma ORM | ✅ |
| CORS配置 | 白名单域名 | ✅ |
| 请求限流 | express-rate-limit | ✅ |

### 8.3 数据安全

| 项目 | 规格 | 状态 |
|------|------|------|
| 敏感数据加密 | 环境变量 | ✅ |
| 数据库备份 | 每日自动备份 | ✅ |
| 日志脱敏 | 敏感信息过滤 | ✅ |

---

## 附录

### A. 前端页面统计

| 类型 | 数量 |
|------|------|
| 用户端公开页面 | 18 |
| 用户端认证页面 | 5 |
| 用户端功能页面 | 7 |
| 管理端页面 | 31 |
| **总计** | **61** |

### B. 后端路由模块统计

| 类型 | 数量 |
|------|------|
| 认证相关 | 3 |
| 内容相关 | 8 |
| 用户相关 | 4 |
| 社区相关 | 4 |
| 管理相关 | 10 |
| 同步相关 | 6 |
| 配置相关 | 8 |
| 其他 | 14 |
| **总计** | **57** |

### C. 性能指标

| 指标 | 目标值 | 当前值 | 状态 |
|------|--------|--------|------|
| 首屏加载 (FCP) | < 1.5s | ~2s | ⚠️ |
| 最大内容绘制 (LCP) | < 2.5s | ~3s | ⚠️ |
| 累积布局偏移 (CLS) | < 0.1 | ~0.05 | ✅ |
| 首次输入延迟 (FID) | < 100ms | ~50ms | ✅ |
| API响应 (P95) | < 500ms | ~300ms | ✅ |

---

**文档维护**：本文档应随系统演进持续更新。如有疑问或建议，请联系技术团队。

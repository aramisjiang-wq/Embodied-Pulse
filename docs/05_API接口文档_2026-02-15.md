# Embodied Pulse API接口文档

**产品名称**：Embodied Pulse（具身智能脉搏）  
**文档类型**：API接口规格说明书  
**版本**：v3.1  
**Base URL**：http://localhost:3001/api/v1  
**更新日期**：2026-02-15  
**状态**：已发布  

---

## 目录

1. [接口规范](#1-接口规范)
2. [认证接口](#2-认证接口)
3. [内容接口](#3-内容接口)
4. [用户接口](#4-用户接口)
5. [社区接口](#5-社区接口)
6. [管理接口](#6-管理接口)
7. [错误码参考](#7-错误码参考)

---

## 1. 接口规范

### 1.1 统一响应格式

```typescript
interface ApiResponse<T> {
  code: number;      // 状态码：0=成功
  message: string;   // 状态消息
  data: T;           // 响应数据
  timestamp: number; // 时间戳
}
```

### 1.2 分页参数

```typescript
interface PaginationParams {
  page: number;      // 页码，从1开始
  size: number;      // 每页数量，默认20
  sort?: string;     // 排序字段
  order?: 'asc' | 'desc';  // 排序方向
}
```

### 1.3 认证方式

所有需要认证的接口需在请求头携带Token：

```
Authorization: Bearer <access_token>
```

---

## 2. 认证接口

### 2.1 发送邮箱验证码

**POST** `/email-verification/send`

**请求体**：
```json
{
  "email": "user@example.com",
  "type": "register"  // register | reset
}
```

**响应**：
```json
{
  "code": 0,
  "message": "验证码发送成功",
  "data": null
}
```

### 2.2 验证邮箱验证码

**POST** `/email-verification/verify`

**请求体**：
```json
{
  "email": "user@example.com",
  "code": "123456",
  "type": "register"
}
```

### 2.3 用户注册

**POST** `/auth/register`

**请求体**：
```json
{
  "email": "user@example.com",
  "password": "password123",
  "nickname": "用户昵称",
  "code": "123456"
}
```

### 2.4 用户登录

**POST** `/auth/login`

**请求体**：
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**响应**：
```json
{
  "code": 0,
  "message": "登录成功",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": "uuid",
      "email": "user@example.com",
      "nickname": "用户昵称",
      "avatarUrl": null,
      "role": "user"
    }
  }
}
```

### 2.5 请求密码重置

**POST** `/password-reset/request`

**请求体**：
```json
{
  "email": "user@example.com"
}
```

### 2.6 确认密码重置

**POST** `/password-reset/confirm`

**请求体**：
```json
{
  "token": "reset_token_from_email",
  "password": "new_password"
}
```

### 2.7 刷新Token

**POST** `/auth/refresh`

**请求体**：
```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIs..."
}
```

### 2.8 获取当前用户

**GET** `/auth/me`

**认证**：需要

**响应**：
```json
{
  "code": 0,
  "data": {
    "id": "uuid",
    "email": "user@example.com",
    "nickname": "用户昵称",
    "avatarUrl": null,
    "bio": null,
    "points": 0,
    "role": "user"
  }
}
```

---

## 3. 内容接口

### 3.1 获取信息流

**GET** `/feed`

**参数**：
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| tab | string | 否 | 类型：recommend/papers/videos/repos/models/news/jobs |
| page | number | 否 | 页码 |
| size | number | 否 | 每页数量 |

### 3.2 论文接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/papers` | 论文列表 |
| GET | `/papers/:id` | 论文详情 |

### 3.3 视频接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/videos` | 视频列表 |
| GET | `/videos/:id` | 视频详情 |

### 3.4 仓库接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/repos` | 仓库列表 |
| GET | `/repos/:id` | 仓库详情 |

### 3.5 模型接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/huggingface` | 模型列表 |
| GET | `/huggingface/:id` | 模型详情 |

### 3.6 新闻接口

**GET** `/news`

### 3.7 职位接口

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/jobs` | 职位列表 |
| GET | `/jobs/:id` | 职位详情 |

---

## 4. 用户接口

### 4.1 收藏功能

| 方法 | 路径 | 说明 | 认证 |
|------|------|------|------|
| GET | `/favorites` | 收藏列表 | 需要 |
| POST | `/favorites` | 添加收藏 | 需要 |
| DELETE | `/favorites/:id` | 取消收藏 | 需要 |

**添加收藏请求体**：
```json
{
  "contentType": "paper",  // paper/video/repo/model/news/job
  "contentId": "uuid"
}
```

### 4.2 订阅功能

| 方法 | 路径 | 说明 | 认证 |
|------|------|------|------|
| GET | `/subscriptions` | 订阅列表 | 需要 |
| POST | `/subscriptions` | 创建订阅 | 需要 |
| PUT | `/subscriptions/:id` | 更新订阅 | 需要 |
| DELETE | `/subscriptions/:id` | 删除订阅 | 需要 |

### 4.3 通知功能

| 方法 | 路径 | 说明 | 认证 |
|------|------|------|------|
| GET | `/notifications` | 通知列表 | 需要 |
| PUT | `/notifications/:id/read` | 标记已读 | 需要 |
| PUT | `/notifications/read-all` | 全部已读 | 需要 |
| GET | `/notifications/unread-count` | 未读数量 | 需要 |

---

## 5. 社区接口

### 5.1 帖子接口

| 方法 | 路径 | 说明 | 认证 |
|------|------|------|------|
| GET | `/posts` | 帖子列表 | 可选 |
| GET | `/posts/my` | 我的帖子 | 需要 |
| GET | `/posts/:id` | 帖子详情 | 可选 |
| POST | `/posts` | 发布帖子 | 需要 |
| PUT | `/posts/:id` | 更新帖子 | 需要 |
| DELETE | `/posts/:id` | 删除帖子 | 需要 |
| POST | `/posts/:id/like` | 点赞帖子 | 需要 |

### 5.2 评论接口

| 方法 | 路径 | 说明 | 认证 |
|------|------|------|------|
| GET | `/comments` | 评论列表 | 可选 |
| POST | `/comments` | 发表评论 | 需要 |
| DELETE | `/comments/:id` | 删除评论 | 需要 |
| POST | `/comments/:id/like` | 点赞评论 | 需要 |

---

## 6. 管理接口

### 6.1 管理员认证

| 方法 | 路径 | 说明 |
|------|------|------|
| POST | `/auth/admin/login` | 管理员登录 |
| GET | `/auth/admin/me` | 当前管理员信息 |

### 6.2 用户管理

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/admin/users` | 用户列表 |
| PUT | `/admin/users/:id` | 更新用户 |
| DELETE | `/admin/users/:id` | 删除用户 |

### 6.3 内容管理

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/admin/content/papers` | 论文管理 |
| GET | `/admin/content/videos` | 视频管理 |
| GET | `/admin/content/repos` | 仓库管理 |
| GET | `/admin/content/huggingface` | 模型管理 |
| GET | `/admin/content/news` | 新闻管理 |
| GET | `/admin/content/jobs` | 职位管理 |

### 6.4 自定义页面管理

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/admin/pages` | 页面列表 |
| POST | `/admin/pages` | 创建页面 |
| PUT | `/admin/pages/:id` | 更新页面 |
| DELETE | `/admin/pages/:id` | 删除页面 |

**页面数据结构**：
```json
{
  "title": "页面标题",
  "slug": "page-slug",
  "content": "<p>HTML内容</p>",
  "isActive": true,
  "sortOrder": 0
}
```

### 6.5 数据同步

| 方法 | 路径 | 说明 |
|------|------|------|
| POST | `/admin/sync/arxiv` | 同步ArXiv |
| POST | `/admin/sync/github` | 同步GitHub |
| POST | `/admin/sync/bilibili` | 同步B站 |
| POST | `/admin/sync/huggingface` | 同步HF |
| POST | `/admin/sync/news` | 同步新闻 |
| POST | `/admin/sync/jobs` | 同步职位 |
| GET | `/admin/sync/status` | 同步状态 |

---

## 7. 错误码参考

| 错误码 | 说明 | HTTP状态码 |
|--------|------|------------|
| 0 | 成功 | 200 |
| 1001 | 参数错误 | 400 |
| 1002 | 未提供Token | 401 |
| 1003 | Token无效 | 401 |
| 1004 | Token已过期 | 401 |
| 2001 | 资源不存在 | 404 |
| 2002 | 权限不足 | 403 |
| 2003 | 用户已存在 | 409 |
| 2004 | 验证码错误 | 400 |
| 2005 | 验证码已过期 | 400 |
| 3001 | 服务器内部错误 | 500 |
| 3002 | 数据库错误 | 500 |
| 3003 | 第三方服务错误 | 502 |

---

**文档维护**：本文档将随API更新持续维护。

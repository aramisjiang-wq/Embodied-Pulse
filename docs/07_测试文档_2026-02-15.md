# Embodied Pulse 测试文档

**产品名称**：Embodied Pulse（具身智能脉搏）  
**文档类型**：测试指南  
**版本**：v1.0  
**更新日期**：2026-02-15  
**适用对象**：测试人员、开发者  

---

## 目录

1. [测试概述](#1-测试概述)
2. [测试环境](#2-测试环境)
3. [功能测试用例](#3-功能测试用例)
4. [API测试](#4-api测试)
5. [性能测试](#5-性能测试)
6. [安全测试](#6-安全测试)

---

## 1. 测试概述

### 1.1 测试范围

| 模块 | 测试类型 | 优先级 |
|------|----------|--------|
| 用户认证 | 功能测试、安全测试 | P0 |
| 内容浏览 | 功能测试、性能测试 | P0 |
| 社区功能 | 功能测试 | P1 |
| 管理后台 | 功能测试 | P1 |
| 数据同步 | 功能测试、性能测试 | P2 |

### 1.2 测试策略

- **单元测试**：核心业务逻辑
- **集成测试**：API接口测试
- **E2E测试**：关键用户流程
- **性能测试**：接口响应时间、并发处理
- **安全测试**：认证授权、输入验证

---

## 2. 测试环境

### 2.1 环境配置

| 项目 | 配置 |
|------|------|
| Node.js | 20.x |
| 数据库 | PostgreSQL 15.x |
| 缓存 | Redis 7.x |
| 测试框架 | Jest |

### 2.2 测试数据

```bash
# 初始化测试数据
cd backend
npm run db:seed
```

---

## 3. 功能测试用例

### 3.1 用户认证模块

#### TC-AUTH-001: 用户注册（正常流程）

| 项目 | 内容 |
|------|------|
| 前置条件 | 用户未注册 |
| 测试步骤 | 1. 访问注册页面<br>2. 输入邮箱<br>3. 点击发送验证码<br>4. 输入验证码<br>5. 设置密码<br>6. 点击注册 |
| 预期结果 | 注册成功，自动登录 |
| 实际结果 | |
| 状态 | |

#### TC-AUTH-002: 用户注册（邮箱已存在）

| 项目 | 内容 |
|------|------|
| 前置条件 | 邮箱已注册 |
| 测试步骤 | 1. 访问注册页面<br>2. 输入已注册邮箱<br>3. 点击发送验证码 |
| 预期结果 | 提示邮箱已被注册 |
| 实际结果 | |
| 状态 | |

#### TC-AUTH-003: 用户登录（正常流程）

| 项目 | 内容 |
|------|------|
| 前置条件 | 用户已注册 |
| 测试步骤 | 1. 访问登录页面<br>2. 输入邮箱和密码<br>3. 点击登录 |
| 预期结果 | 登录成功，跳转首页 |
| 实际结果 | |
| 状态 | |

#### TC-AUTH-004: 用户登录（密码错误）

| 项目 | 内容 |
|------|------|
| 前置条件 | 用户已注册 |
| 测试步骤 | 1. 访问登录页面<br>2. 输入邮箱和错误密码<br>3. 点击登录 |
| 预期结果 | 提示密码错误 |
| 实际结果 | |
| 状态 | |

#### TC-AUTH-005: 密码找回

| 项目 | 内容 |
|------|------|
| 前置条件 | 用户已注册 |
| 测试步骤 | 1. 点击忘记密码<br>2. 输入邮箱<br>3. 查收邮件<br>4. 点击重置链接<br>5. 设置新密码 |
| 预期结果 | 密码重置成功 |
| 实际结果 | |
| 状态 | |

### 3.2 内容浏览模块

#### TC-CONTENT-001: 首页信息流加载

| 项目 | 内容 |
|------|------|
| 前置条件 | 无 |
| 测试步骤 | 1. 访问首页<br>2. 观察内容加载 |
| 预期结果 | 信息流正常加载，显示多种类型内容 |
| 实际结果 | |
| 状态 | |

#### TC-CONTENT-002: 论文列表浏览

| 项目 | 内容 |
|------|------|
| 前置条件 | 无 |
| 测试步骤 | 1. 访问论文列表页<br>2. 滚动加载更多<br>3. 点击论文卡片 |
| 预期结果 | 列表正常加载，详情页正常显示 |
| 实际结果 | |
| 状态 | |

### 3.3 社区功能模块

#### TC-COMMUNITY-001: 发布帖子

| 项目 | 内容 |
|------|------|
| 前置条件 | 用户已登录 |
| 测试步骤 | 1. 访问我的市集<br>2. 点击发布帖子<br>3. 填写标题和内容<br>4. 点击发布 |
| 预期结果 | 帖子发布成功，显示在列表中 |
| 实际结果 | |
| 状态 | |

#### TC-COMMUNITY-002: 评论功能

| 项目 | 内容 |
|------|------|
| 前置条件 | 用户已登录，存在帖子 |
| 测试步骤 | 1. 访问帖子详情<br>2. 输入评论内容<br>3. 点击发送 |
| 预期结果 | 评论发送成功，显示在评论列表 |
| 实际结果 | |
| 状态 | |

---

## 4. API测试

### 4.1 认证接口测试

#### 发送验证码

```bash
curl -X POST http://localhost:3001/api/v1/email-verification/send \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","type":"register"}'
```

**预期响应**：
```json
{
  "code": 0,
  "message": "验证码发送成功",
  "data": null
}
```

#### 用户登录

```bash
curl -X POST http://localhost:3001/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'
```

**预期响应**：
```json
{
  "code": 0,
  "message": "登录成功",
  "data": {
    "accessToken": "...",
    "refreshToken": "...",
    "user": {...}
  }
}
```

### 4.2 内容接口测试

#### 获取论文列表

```bash
curl http://localhost:3001/api/v1/papers?page=1&size=20
```

**预期响应**：
```json
{
  "code": 0,
  "data": {
    "items": [...],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 100,
      "totalPages": 5
    }
  }
}
```

### 4.3 管理接口测试

#### 获取用户列表

```bash
curl http://localhost:3001/api/v1/admin/users \
  -H "Authorization: Bearer <admin_token>"
```

---

## 5. 性能测试

### 5.1 接口响应时间

| 接口 | 目标响应时间 | 实际响应时间 | 状态 |
|------|--------------|--------------|------|
| GET /api/v1/papers | < 300ms | | |
| GET /api/v1/videos | < 300ms | | |
| GET /api/v1/feed | < 500ms | | |
| POST /api/v1/auth/login | < 200ms | | |

### 5.2 并发测试

```bash
# 使用 ab 工具进行并发测试
ab -n 1000 -c 100 http://localhost:3001/api/v1/papers
```

### 5.3 性能指标

| 指标 | 目标值 | 实际值 | 状态 |
|------|--------|--------|------|
| 首屏加载(FCP) | < 1.5s | | |
| 最大内容绘制(LCP) | < 2.5s | | |
| API P95响应时间 | < 500ms | | |
| 并发用户数 | 100+ | | |

---

## 6. 安全测试

### 6.1 认证安全

| 测试项 | 测试方法 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 无Token访问 | 访问需认证接口 | 返回401 | |
| Token过期 | 使用过期Token | 返回401 | |
| 无效Token | 使用伪造Token | 返回401 | |
| 密码加密 | 查看数据库 | 密码已bcrypt加密 | |

### 6.2 输入验证

| 测试项 | 测试方法 | 预期结果 | 状态 |
|--------|----------|----------|------|
| SQL注入 | 输入SQL语句 | 参数化查询，无注入 | |
| XSS攻击 | 输入脚本代码 | 内容被转义 | |
| 参数校验 | 输入非法参数 | 返回参数错误 | |

### 6.3 权限控制

| 测试项 | 测试方法 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 普通用户访问管理接口 | 使用用户Token | 返回403 | |
| 越权操作 | 操作他人数据 | 返回403 | |

---

## 测试报告模板

### 测试执行摘要

| 项目 | 内容 |
|------|------|
| 测试日期 | |
| 测试人员 | |
| 测试环境 | |
| 测试用例总数 | |
| 通过数 | |
| 失败数 | |
| 阻塞数 | |
| 通过率 | |

### 缺陷统计

| 严重程度 | 数量 | 已修复 | 待修复 |
|----------|------|--------|--------|
| 致命 | | | |
| 严重 | | | |
| 一般 | | | |
| 轻微 | | | |

---

**文档维护**：本文档将随测试活动持续更新。
